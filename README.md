# pm - утилита для управления проектами


[![Build Status](http://t.majexa.ru/api/badges/majexa/pm/status.svg)](http://t.majexa.ru/majexa/pm)

- создание бутстрап-проекта на Ngn
- управление в-хостами
- ф-ии на уровне проекта
- обновление web-точек входа и cli-точек входа: `pm localProjects updateIndex`

{console pm}

## Полезные команды

    # выключает режим отладки на всех проектах
    pm localProjects replaceConstant name core IS_DEBUG false
    
    # включает режим отладки на всех проектах
    pm localProjects replaceConstant name core IS_DEBUG true


## Конфигурирование проектов

### Создание виртуальных хостов для проектов вне ngn-архитектуры
Для размещения на сервере проекта на другом движке, можно использовать
функционал утилиты PM для автоматического создания виртуальных хостов
проекта. Для этого в папке проекта должен присутствовать файл `.nonNgn`.
В этом случае файловая структура проекта не будет подвергаться изменениям
при апдейтах системы.

### Совственный index.php, cmd.php, queue.php, etc.
Для реализации собственной инициализации, когда это не возможно организвать
через файл `site/init.php`, можно отключать апдейт индексных файлов.
Для этого разместите в корне проекта файл `.keepIndex`.


### Файл записей проектов
При создании проекта с помощью команды `pm localServer createProject...` информация
о проекте записывается в _Файл записей проектов_. Он находится здесь: `NGN_ENV_PATH/config/projects.php`.

Некоторые из опций проекта, такие например,
как `aliases`, не редактируются через стандартные команды утилиты `pm`. Их необходимо
добавлять напрямую в _Файл записей_, а потом перезаписывать виртуальные хосты командой
`pm localServer updateHosts`.

### Вхост-алиасы

Для добавления _Вхост-алиаса_ отредактируйте _Файл записей проектов_. Пример:

    return [
      [
        'type' => 'common',
        'name' => 'test',
        'domain' => 'test.majexa.ru'
        'aliases' => [
          'test.ru'
        ]
      ]
    ];
